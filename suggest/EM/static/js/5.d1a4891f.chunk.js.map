{"version":3,"sources":["http/index.js","pages/user/login/index.module.less","assets/images/logo.png","pages/user/login/index.js"],"names":["client","axios","create","module","exports","Login","props","state","username","password","verificationCode","this","utils","focusInputScrollScreen","ready","listenBack","plus","window","webview","currentWebview","key","addEventListener","canBack","e","back","first","Date","getTime","runtime","quit","setTimeout","preventDefault","history","push","Object","keys","every","post","data","success","console","error","setState","target","name","value","className","CSS","login","logo","src","logoImg","alt","onSubmit","loginFn","bind","formInput","type","onChange","inputChangeFn","placeholder","autoComplete","formButton","to","pathname","React","Component"],"mappings":"+FAAA,YACMA,EADN,OACeC,EAAMC,OAAO,IAGbF,O,mBCHfG,EAAOC,QAAU,CAAC,MAAQ,eAAe,KAAO,cAAc,UAAY,mBAAmB,iBAAmB,0BAA0B,WAAa,sB,mBCDvJD,EAAOC,QAAU,IAA0B,kC,sZCMrCC,E,YACJ,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KACDC,MAAQ,CACXC,SAAU,GACVC,SAAU,GACVC,iBAAkB,IALH,E,iFASjBC,KAAKC,MAAMC,yBACXF,KAAKC,MAAME,MAAMH,KAAKI,c,mCAGtB,IAAIC,EAAOC,OAAOD,KACdE,EAAUF,EAAKE,QAAQC,iBAC3BH,EAAKI,IAAIC,iBAAiB,cAAc,WACtCH,EAAQI,SAAQ,SAAUC,GACxB,GAAIA,EAAED,QACJJ,EAAQM,WACH,CAGL,IAAIC,EAAQ,KACZT,EAAKI,IAAIC,iBAAiB,cAAc,WAEjCI,GAMC,IAAIC,MAAOC,UAAYF,EAAQ,MACjCT,EAAKY,QAAQC,QANfJ,GAAQ,IAAIC,MAAOC,UACnBG,YAAW,WACTL,EAAQ,OACP,SAMJ,Y,uEAKGF,G,+EACZA,EAAEQ,iBACFpB,KAAKL,MAAM0B,QAAQC,KAAK,UACXC,OAAOC,KAAKxB,KAAKJ,OAAO6B,OAAM,SAAChB,GAAD,QAAW,EAAKb,MAAMa,M,0CAG7CnB,IAAMoC,KAAK,aAAc1B,KAAKJ,O,cACtC+B,KAAKC,SACX5B,KAAKL,MAAM0B,QAAQC,KAAK,a,kDAG1BO,QAAQC,MAAR,M,qJAIQlB,GACZZ,KAAK+B,SAAL,eACGnB,EAAEoB,OAAOC,KAAOrB,EAAEoB,OAAOE,U,+BAI5B,OACE,yBAAKC,UAAWC,IAAIC,OAClB,yBAAKF,UAAWC,IAAIE,MAClB,yBAAKC,IAAKC,IAASC,IAAI,KACvB,mCAEF,0BAAMC,SAAU1C,KAAK2C,QAAQC,KAAK5C,OAChC,yBAAKmC,UAAWC,IAAIS,WAClB,uBAAGV,UAAU,8BACb,2BAAOW,KAAK,OAAOZ,MAAOlC,KAAKJ,MAAMC,SAAUoC,KAAK,WAAWc,SAAU/C,KAAKgD,cAAcJ,KAAK5C,MAAOiD,YAAY,oCAEtH,yBAAKd,UAAWC,IAAIS,WAClB,uBAAGV,UAAU,4BACb,2BAAOW,KAAK,WAAWZ,MAAOlC,KAAKJ,MAAME,SAAUmC,KAAK,WAAWc,SAAU/C,KAAKgD,cAAcJ,KAAK5C,MAAOiD,YAAY,2BAAOC,aAAa,kBAE9I,yBAAKf,UAAWC,IAAIS,WAClB,uBAAGV,UAAU,gCACb,2BAAOW,KAAK,OAAOZ,MAAOlC,KAAKJ,MAAMG,iBAAkBkC,KAAK,mBAAmBc,SAAU/C,KAAKgD,cAAcJ,KAAK5C,MAAOiD,YAAY,mCACpI,0BAAMd,UAAWC,IAAIrC,kBAAkB,yBAAKwC,IAAKvC,KAAKJ,MAAMG,iBAAkB0C,IAAI,KAAlF,uBAEF,yBAAKN,UAAWC,IAAIe,YAAY,4BAAQL,KAAK,UAAb,kBAElC,kBAAC,IAAD,CAAMM,GAAI,SAAA/B,GAAO,O,yVAAA,IAAUA,EAAV,CAAmBgC,SAAU,iBAA9C,iC,GApFYC,IAAMC,WAyFX7D","file":"static/js/5.d1a4891f.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst client = axios.create({\r\n  // baseURL: 'http://localhost:9000'\r\n})\r\nexport default client\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"login__2MJZX\",\"logo\":\"logo__5-OyK\",\"formInput\":\"formInput__KwYa6\",\"verificationCode\":\"verificationCode__2xHxT\",\"formButton\":\"formButton__2kqho\"};","module.exports = __webpack_public_path__ + \"static/media/logo.2942ad72.png\";","import React from 'react';\r\nimport axios from '../../../http/index'\r\nimport { Link } from 'react-router-dom'\r\nimport CSS from './index.module.less'\r\nimport logoImg from '../../../assets/images/logo.png';\r\n\r\nclass Login extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      username: '',\r\n      password: '',\r\n      verificationCode: ''\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.utils.focusInputScrollScreen()\r\n    this.utils.ready(this.listenBack)\r\n  }\r\n  listenBack() {\r\n    let plus = window.plus\r\n    let webview = plus.webview.currentWebview();\r\n    plus.key.addEventListener('backbutton', function () {\r\n      webview.canBack(function (e) {\r\n        if (e.canBack) {\r\n          webview.back();\r\n        } else {\r\n          //首页返回键处理\r\n          //处理逻辑：1秒内，连续两次按返回键，则退出应用；\r\n          var first = null;\r\n          plus.key.addEventListener('backbutton', function () {\r\n            //首次按键，提示‘再按一次退出应用’\r\n            if (!first) {\r\n              first = new Date().getTime();\r\n              setTimeout(function () {\r\n                first = null;\r\n              }, 1000);\r\n            } else {\r\n              if (new Date().getTime() - first < 1500) {\r\n                plus.runtime.quit();\r\n              }\r\n            }\r\n          }, false);\r\n        }\r\n      })\r\n    })\r\n  }\r\n  async loginFn(e) {\r\n    e.preventDefault()\r\n    this.props.history.push('/home')\r\n    let isFull = Object.keys(this.state).every((key) => !!this.state[key])\r\n    if (isFull) {\r\n      try {\r\n        let res = await axios.post('/api/login', this.state)\r\n        if (res.data.success) {\r\n          this.props.history.push('forgetPwd')\r\n        }\r\n      } catch (err) {\r\n        console.error(err)\r\n      }\r\n    }\r\n  }\r\n  inputChangeFn(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n  render() {\r\n    return (\r\n      <div className={CSS.login}>\r\n        <div className={CSS.logo}>\r\n          <img src={logoImg} alt='' />\r\n          <h3>EM</h3>\r\n        </div>\r\n        <form onSubmit={this.loginFn.bind(this)}>\r\n          <div className={CSS.formInput}>\r\n            <i className=\"iconfont icon-people_fill\"></i>\r\n            <input type=\"text\" value={this.state.username} name=\"username\" onChange={this.inputChangeFn.bind(this)} placeholder=\"输入用户名\" />\r\n          </div>\r\n          <div className={CSS.formInput}>\r\n            <i className=\"iconfont icon-lock_fill\"></i>\r\n            <input type=\"password\" value={this.state.password} name=\"password\" onChange={this.inputChangeFn.bind(this)} placeholder=\"输入密码\" autoComplete=\"new-password\" />\r\n          </div>\r\n          <div className={CSS.formInput}>\r\n            <i className=\"iconfont icon-integral_fill\"></i>\r\n            <input type=\"text\" value={this.state.verificationCode} name=\"verificationCode\" onChange={this.inputChangeFn.bind(this)} placeholder=\"输入验证码\" />\r\n            <span className={CSS.verificationCode}><img src={this.state.verificationCode} alt=\"\" />换一个</span>\r\n          </div>\r\n          <div className={CSS.formButton}><button type=\"submit\">登录</button></div>\r\n        </form>\r\n        <Link to={history => ({ ...history, pathname: \"/forgetPwd\" })}>忘记密码</Link>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default Login\r\n"],"sourceRoot":""}